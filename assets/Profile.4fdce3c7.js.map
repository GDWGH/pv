{"version":3,"file":"Profile.4fdce3c7.js","sources":["../../packages/user/Profile.vue"],"sourcesContent":["<template>\n  <LayoutDefault>\n    <div v-if=\"user\" class=\"max-w-screen-xl mx-auto\">\n      <!-- padding for profile background -->\n      <div class=\"w-full aspect-ratio-6/1 bg-gray-200 dark:bg-gray-600\" />\n      <!-- basic info -->\n      <div class=\"flex flex-row lt-sm:mt-2 ml-4 md:ml-16\">\n        <div class=\"aspect-ratio-1/1 flex-shrink-0 flex-grow-0 sm:-mt-16\">\n          <div\n            class=\"overflow-hidden border-2 border-gray-300 dark:border-gray-800 transform transition-all ease duration-300\"\n            :style=\"{ borderRadius: isHoveringAvatar ? '0.25rem' : screenSizes.md ? '14rem' : '5rem' }\"\n            @mouseenter=\"() => isHoveringAvatar = true\"\n            @mouseleave=\"() => isHoveringAvatar = false\"\n          >\n            <UserAvatar\n              class=\"w-20 h-20 md:w-56 md:h-56 cursor-pointer\"\n              openable\n              hide-title\n              :alt=\"user.username\"\n              :image=\"user.image\"\n              :gravatar=\"user.gravatar\"\n            />\n          </div>\n        </div>\n        <div class=\"mt-1 sm:mt-2 ml-2 sm:ml-6\">\n          <!-- username -->\n          <h1 class=\"inline-block text-lg sm:text-2xl font-medium\" v-text=\"user.username\" />\n          <RouterLink\n            v-if=\"isMe\"\n            class=\"i-uil:edit-alt ml-1 text-2xl align-text-bottom text-gray-600 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-200 transition-colors duration-100\"\n            to=\"/settings/account\"\n          />\n          <div class=\"text-xs sm:text-sm text-gray-800 dark:text-gray-300\">\n            {{ t('user.profile.info.created-at', { date: user.meta.createdAt.toLocaleDateString() }) }}\n          </div>\n          <!-- bio -->\n          <p class=\"whitespace-pre break-normal line-clamp-4\" v-text=\"user.desc\" />\n        </div>\n      </div>\n      <div class=\"mt-4 ml-8\">\n        {{ t('user.profile.nothing') }}\n      </div>\n    </div>\n  </LayoutDefault>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport UserAvatar from './components/UserAvatar.vue'\nimport { useAuth } from '.'\nimport { gql, useQuery, useResult } from '@/graphql'\nimport type { Query } from '@/graphql'\nimport { setSiteTitle } from '@/common/libs/setSiteTitle'\nimport { screenSizes } from '@/css'\nimport { startProgress, stopProgress } from '@/nprogress'\n\nconst { t } = useI18n()\nconst route = useRoute()\nconst auth = useAuth()\n\nconst uid = computed(() => route.params.uid as string)\nconst isMe = computed(() => uid.value === auth.uid)\nconst { result, loading } = useQuery<Query>(\n  gql`\n    query ($uid: String!) {\n      getUser(para: { uid: $uid }) {\n        id\n        username\n        desc\n        image\n        gravatar\n        meta {\n          createdAt\n        }\n      }\n    }\n  `,\n  {\n    uid,\n  },\n)\n\n// sync process bar\nwatchEffect(() => {\n  if (loading.value)\n    startProgress()\n  else\n    stopProgress()\n})\n\n// basic info\nconst user = useResult(result, null, data => data?.getUser)\n// change title\nwatchEffect(() => {\n  if (user.value)\n    setSiteTitle(t('user.profile.title', { username: user.value.username }))\n})\n\nconst isHoveringAvatar = ref(false)\n</script>\n"],"names":["t","useI18n","route","useRoute","auth","useAuth","uid","computed","isMe","result","loading","useQuery","gql","watchEffect","startProgress","stopProgress","user","useResult","data","setSiteTitle","isHoveringAvatar","ref"],"mappings":"y9BA0DA,KAAA,CAAA,EAAAA,GAAAC,IACAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAA,IAAAL,EAAA,OAAA,GAAA,EACAM,EAAAD,EAAA,IAAAD,EAAA,QAAAF,EAAA,GAAA,EACA,CAAA,OAAAK,EAAA,QAAAC,CAAA,EAAAC,EAA4BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAC1B,CAcA,IAAAN,CACE,CACF,EAIFO,EAAA,IAAA,CACEH,EAAA,MACEI,IAEAC,GAAa,CAAA,EAIjB,MAAAC,EAAAC,EAAAR,EAAA,KAAAS,GAAAA,GAAA,YAAAA,EAAA,OAAA,EAEAL,EAAA,IAAA,CACEG,EAAA,OACEG,EAAAnB,EAAA,qBAAA,CAAA,SAAAgB,EAAA,MAAA,QAAA,CAAA,CAAA,CAAuE,CAAA,EAG3E,MAAAI,EAAAC,EAAA,EAAA"}